function toggleAndSaveTheme(){$("body").toggleClass("bg-light bg-dark");const e=$("body").hasClass("bg-dark");$(".theme-btn").html(e?'<i class="fas fa-sun"></i> Light':'<i class="fas fa-moon"></i> Dark'),localStorage.setItem("theme",e?"dark":"light"),$(document).trigger("themeChanged",[e?"dark":"light"])}function setDarkTheme(){$("body").addClass("bg-dark").removeClass("bg-light"),$(".navbar").addClass("navbar-dark").removeClass("navbar-light"),$(".theme-btn").html('<i class="fas fa-sun"></i> Light').removeClass("btn-outline-dark").addClass("btn-outline-light"),$(document).trigger("themeChanged",["dark"])}function setLightTheme(){$("body").addClass("bg-light").removeClass("bg-dark"),$(".navbar").addClass("navbar-light").removeClass("navbar-dark"),$(".theme-btn").html('<i class="fas fa-moon"></i> Dark').removeClass("btn-outline-light").addClass("btn-outline-dark"),$(document).trigger("themeChanged",["light"])}function handleThemeChange(){$(document).on("themeChanged",function(e,a){"dark"===a?$(".navbar").removeClass("bg-light navbar-light").addClass("bg-dark navbar-dark"):$(".navbar").removeClass("bg-dark navbar-dark").addClass("bg-light navbar-light")})}let scrollTimeout;function handleScroll(){scrollTimeout||(scrollTimeout=setTimeout(()=>{const e=$(window).scrollTop(),a=$(".navbar");e>=100?a.addClass("navbar-scrolled"):a.removeClass("navbar-scrolled");const o=e+100;$("section").each(function(e){$(this).position().top<=o&&($(".navbar-nav .nav-link.active").removeClass("active"),$(".navbar-nav .nav-link").eq(e).addClass("active"))}),scrollTimeout=null},100))}function fixWhatsAppLinks(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$('a[href*="wa.me"], a[href*="api.whatsapp"]').each(function(){const e=$(this).attr("href").match(/wa\.me\/(\d+)(?:\?text=(.+))?/);if(e){const a=e[1],o=e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"";let t=`whatsapp://send?phone=${a}`;o&&(t+=`&text=${encodeURIComponent(o)}`),$(this).attr("href",t)}})}function expandAllTech(){$(".tech-grid.collapse").collapse("show"),$(".tech-category-title .collapse-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down")}function collapseAllTech(){$(".tech-grid.collapse").collapse("hide"),$(".tech-category-title .collapse-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right")}function openProductModal(e){const a=document.getElementById("productModal"),o=document.getElementById(e+"-modal");a&&o&&(document.querySelectorAll(".modal-product-content").forEach(e=>{e.style.display="none"}),o.style.display="block",a.classList.add("show"),document.body.style.overflow="hidden")}function closeProductModal(e){const a=document.getElementById("productModal");(e.target===a||e.target.classList.contains("product-modal-close"))&&(a.classList.remove("show"),document.body.style.overflow="")}$(function(){const e=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===e||!e&&a?setDarkTheme():setLightTheme(),handleThemeChange(),fixWhatsAppLinks(),$(window).on("scroll",handleScroll),$(document).on("click",function(e){$(e.target).closest(".navbar").length||$(".navbar-collapse").collapse("hide")}),$(".tech-grid").on("show.bs.collapse",function(){$(this).siblings(".tech-category-header").find(".collapse-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down")}),$(".tech-grid").on("hide.bs.collapse",function(){$(this).siblings(".tech-category-header").find(".collapse-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right")}),$(".tech-category").on("click",function(e){const a=$(this).find(".tech-grid");a.hasClass("show")||$(e.target).closest(".tech-item, a, button, .btn, .tech-category-header").length||a.collapse("show")}),$(".tech-grid").on("hidden.bs.collapse",function(){$(this).closest(".tech-category").addClass("collapsed-card")}).on("shown.bs.collapse",function(){$(this).closest(".tech-category").removeClass("collapsed-card")})}),document.addEventListener("keydown",function(e){if("Escape"===e.key){const e=document.getElementById("productModal");e&&e.classList.contains("show")&&(e.classList.remove("show"),document.body.style.overflow="")}}),window.expandAllTech=expandAllTech,window.collapseAllTech=collapseAllTech,window.openProductModal=openProductModal,window.closeProductModal=closeProductModal;