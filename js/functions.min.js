function toggleAndSaveTheme(){$("body").toggleClass("bg-light bg-dark");const e=$("body").hasClass("bg-dark");$(".theme-btn").html(e?'<i class="fas fa-sun"></i> Light':'<i class="fas fa-moon"></i> Dark'),localStorage.setItem("theme",e?"dark":"light"),$(document).trigger("themeChanged",[e?"dark":"light"])}function setDarkTheme(){$("body").addClass("bg-dark").removeClass("bg-light"),$(".navbar").addClass("navbar-dark").removeClass("navbar-light"),$(".theme-btn").html('<i class="fas fa-sun"></i> Light').removeClass("btn-outline-dark").addClass("btn-outline-light"),$(document).trigger("themeChanged",["dark"])}function setLightTheme(){$("body").addClass("bg-light").removeClass("bg-dark"),$(".navbar").addClass("navbar-light").removeClass("navbar-dark"),$(".theme-btn").html('<i class="fas fa-moon"></i> Dark').removeClass("btn-outline-light").addClass("btn-outline-dark"),$(document).trigger("themeChanged",["light"])}function initBootstrapComponents(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(e=>new bootstrap.Tooltip(e));[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(e=>new bootstrap.Popover(e))}function handleThemeChange(){$(document).on("themeChanged",function(e,o){"dark"===o?$(".navbar").removeClass("bg-light navbar-light").addClass("bg-dark navbar-dark"):$(".navbar").removeClass("bg-dark navbar-dark").addClass("bg-light navbar-light")})}let scrollTimeout;function handleScroll(){scrollTimeout||(scrollTimeout=setTimeout(()=>{const e=$(window).scrollTop(),o=$(".navbar");e>=100?o.addClass("navbar-scrolled"):o.removeClass("navbar-scrolled");const t=e+100;$("section").each(function(e){$(this).position().top<=t&&($(".navbar-nav .nav-link.active").removeClass("active"),$(".navbar-nav .nav-link").eq(e).addClass("active"))}),scrollTimeout=null},100))}function fixWhatsAppLinks(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&$('a[href*="wa.me"], a[href*="api.whatsapp"]').each(function(){const e=$(this).attr("href").match(/wa\.me\/(\d+)(?:\?text=(.+))?/);if(e){const o=e[1],t=e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"";let a=`whatsapp://send?phone=${o}`;t&&(a+=`&text=${encodeURIComponent(t)}`),$(this).attr("href",a)}})}function expandAllTech(){$(".tech-grid.collapse").collapse("show"),$(".tech-category-title .collapse-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down")}function collapseAllTech(){$(".tech-grid.collapse").collapse("hide"),$(".tech-category-title .collapse-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right")}function openProductModal(e){const o=document.getElementById("productModal"),t=document.getElementById(e+"-modal");o&&t&&(document.querySelectorAll(".modal-product-content").forEach(e=>{e.style.display="none"}),t.style.display="block",o.classList.add("show"),document.body.style.overflow="hidden")}function closeProductModal(e){const o=document.getElementById("productModal");(e.target===o||e.target.classList.contains("product-modal-close"))&&(o.classList.remove("show"),document.body.style.overflow="")}$(function(){const e=localStorage.getItem("theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===e||!e&&o?setDarkTheme():setLightTheme(),initBootstrapComponents(),handleThemeChange(),fixWhatsAppLinks(),$(window).on("scroll",handleScroll),$(document).on("click",function(e){$(e.target).closest(".navbar").length||$(".navbar-collapse").collapse("hide")}),$(".tech-grid").on("show.bs.collapse",function(){$(this).siblings(".tech-category-header").find(".collapse-icon").removeClass("fa-chevron-right").addClass("fa-chevron-down")}),$(".tech-grid").on("hide.bs.collapse",function(){$(this).siblings(".tech-category-header").find(".collapse-icon").removeClass("fa-chevron-down").addClass("fa-chevron-right")}),$(".tech-category").on("click",function(e){const o=$(this).find(".tech-grid");o.hasClass("show")||$(e.target).closest(".tech-item, a, button, .btn, .tech-category-header").length||o.collapse("show")}),$(".tech-grid").on("hidden.bs.collapse",function(){$(this).closest(".tech-category").addClass("collapsed-card")}).on("shown.bs.collapse",function(){$(this).closest(".tech-category").removeClass("collapsed-card")})}),document.addEventListener("keydown",function(e){if("Escape"===e.key){const e=document.getElementById("productModal");e&&e.classList.contains("show")&&(e.classList.remove("show"),document.body.style.overflow="")}}),window.IntegrAuth={toggleTheme:toggleAndSaveTheme,setDarkTheme:setDarkTheme,setLightTheme:setLightTheme},window.expandAllTech=expandAllTech,window.collapseAllTech=collapseAllTech,window.openProductModal=openProductModal,window.closeProductModal=closeProductModal;